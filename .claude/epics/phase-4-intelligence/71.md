---
name: fix-analytics-duplicate-counting
title: Fix inconsistent duplicate counting in analytics service
status: open
created: 2026-01-21T09:18:28Z
updated: 2026-01-21T09:22:45Z
size: M
hours: 6
parallel: false
dependencies: []
---

# Issue #71: Fix inconsistent duplicate counting in analytics

## Description

Inconsistent duplicate counting logic in analytics service leads to different duplicate counts between metrics.

## Current Problem

- Users see inconsistent duplicate counts
- Analytics dashboard shows conflicting numbers
- Difficult to debug and verify correctness
- Undermines trust in analytics

## Proposed Solution

1. Define single source of truth for duplicate counting
2. Centralize duplicate detection logic in one method
3. Ensure all metrics use the same counting algorithm
4. Add validation tests to catch divergence

## Acceptance Criteria

- [ ] Single duplicate counting method implemented
- [ ] All metrics call centralized method
- [ ] Counts are consistent across all analytics views
- [ ] Tests verify count consistency
- [ ] Documentation explains counting methodology

## Technical Details

**File**: `src/file_organizer/services/analytics/analytics_service.py` (lines 147-159)
**Priority**: Medium
**Impact**: High (user trust in metrics)

## References

- CodeRabbit PR #67 review comment
- Related to Phase 4 analytics features
