---
name: 006-preference-profile-management
title: Add preference profile management
status: open
size: M
hours: 16
parallel: false
depends_on: [50, 49]
created: 2026-01-21T05:53:07Z
updated: 2026-01-26T00:52:32Z
github: https://github.com/curdriceaurora/Local-File-Organizer/issues/220
---

# Task 006: Add preference profile management

## Description
Implement comprehensive preference profile management system allowing users to export, import, manage multiple profiles, merge preferences, and use default templates. This enables users to share preferences across machines, maintain different organizational styles, and quickly set up new environments.

## Objectives
- Export/import preference profiles
- Support multiple profile management
- Implement profile merging and migration
- Provide default profile templates

## Requirements

### Functional Requirements
1. **Export/Import Functionality**
   - Export preferences to JSON file
   - Import preferences from JSON file
   - Validate imported profile structure
   - Handle version compatibility
   - Support partial imports (selective preferences)

2. **Multiple Profile Support**
   - Create, activate, and switch between profiles
   - Name and describe profiles
   - List all available profiles
   - Delete unused profiles
   - Set default profile

3. **Profile Merging and Migration**
   - Merge two or more profiles
   - Conflict resolution during merge
   - Migrate old profile formats to new versions
   - Preserve confidence scores during migration
   - Backup before destructive operations

4. **Default Profile Templates**
   - Pre-built templates for common workflows
   - Templates: Work, Personal, Photography, Development, Academic
   - Customizable template options
   - Template preview before activation
   - Community template sharing (future consideration)

### Technical Requirements
- JSON-based profile format with versioning
- Profile validation and sanitization
- Atomic profile switching
- Profile backup and rollback capabilities
- Migration scripts for version upgrades

## Implementation Details

### Profile Structure
```json
{
  "profile_name": "Work Profile",
  "profile_version": "1.0",
  "description": "Corporate document organization",
  "created": "2026-01-21T05:53:07Z",
  "updated": "2026-01-21T05:53:07Z",
  "preferences": {
    "global": {},
    "directory_specific": {}
  },
  "learned_patterns": {},
  "confidence_data": {}
}
```

### Key Components
1. **ProfileManager** class
   - create_profile(name, description)
   - activate_profile(profile_name)
   - list_profiles()
   - delete_profile(profile_name)
   - get_active_profile()

2. **ProfileExporter** class
   - export_profile(profile_name, file_path)
   - export_selective(profile_name, file_path, preferences_list)
   - validate_export()
   - compress_export(optional)

3. **ProfileImporter** class
   - import_profile(file_path, new_name)
   - import_selective(file_path, preferences_list)
   - validate_import_file(file_path)
   - preview_import(file_path)

4. **ProfileMerger** class
   - merge_profiles(profile_list, merge_strategy)
   - resolve_conflicts(conflicting_prefs)
   - preserve_high_confidence()
   - create_merged_profile(name)

5. **ProfileMigrator** class
   - migrate_version(old_profile, target_version)
   - backup_before_migration()
   - validate_migration()
   - rollback_migration()

6. **TemplateManager** class
   - list_templates()
   - get_template(template_name)
   - create_profile_from_template(template_name, profile_name)
   - preview_template(template_name)
   - create_custom_template(from_profile)

## Acceptance Criteria
- [ ] Export profile to valid JSON file
- [ ] Import profile successfully with validation
- [ ] Switch between profiles without data loss
- [ ] Create and manage multiple profiles (tested with 5+ profiles)
- [ ] Merge profiles with proper conflict resolution
- [ ] Migrate old profile formats to current version
- [ ] At least 5 default templates available
- [ ] Template preview shows expected behavior
- [ ] Profile operations are atomic (no partial failures)
- [ ] Backup created before destructive operations
- [ ] CLI commands for all profile operations
- [ ] Performance: profile switch < 100ms

## Dependencies
- Task 004: Build preference tracking system (required)
- Task 005: Implement pattern learning from user feedback (required)

## Estimated Effort
- Size: M (Medium)
- Hours: 16
- Can be parallelized: No (depends on Tasks 004 and 005)

## CLI Interface Design

### Commands
```bash
# Profile management
file-organizer profile list
file-organizer profile create <name> --description "..."
file-organizer profile activate <name>
file-organizer profile delete <name>
file-organizer profile current

# Export/Import
file-organizer profile export <name> --output profile.json
file-organizer profile import profile.json --as <new_name>
file-organizer profile export <name> --selective "naming,folders"

# Merging
file-organizer profile merge <profile1> <profile2> --output <merged_name>
file-organizer profile merge <profile1> <profile2> --strategy recent|frequent|confident

# Templates
file-organizer profile templates list
file-organizer profile templates preview <template_name>
file-organizer profile create-from-template <template_name> <profile_name>

# Migration
file-organizer profile migrate <profile_name> --to-version 2.0
```

## Default Templates

### 1. Work Profile
- Formal naming conventions
- Date-based organization
- Client/project folder structure
- Document type categorization

### 2. Personal Profile
- Casual naming patterns
- Topic-based organization
- Minimal folder depth
- Quick access priorities

### 3. Photography Profile
- Date and event-based organization
- RAW vs processed separation
- Year/Month folder structure
- Camera/lens metadata usage

### 4. Development Profile
- Project-based organization
- Language-specific folders
- Version control awareness
- Build artifact handling

### 5. Academic Profile
- Course/semester organization
- Citation and reference management
- Paper draft versioning
- Research project structure

## Testing Strategy
1. Unit tests for each component class
2. Integration tests for profile operations
3. Export/import round-trip tests
4. Profile merge scenario tests
5. Migration path tests (all versions)
6. Template validation tests
7. Concurrent profile access tests
8. Performance benchmarks
9. User acceptance testing with real profiles

## Implementation Phases

### Phase 1: Basic Profile Management (6 hours)
- ProfileManager implementation
- Create, activate, list, delete operations
- CLI command integration

### Phase 2: Export/Import (4 hours)
- ProfileExporter and ProfileImporter
- Validation and error handling
- Selective import/export

### Phase 3: Merging & Migration (4 hours)
- ProfileMerger implementation
- ProfileMigrator with versioning
- Backup and rollback

### Phase 4: Templates (2 hours)
- TemplateManager implementation
- Create 5 default templates
- Template preview functionality

## Notes
- Profile files should be human-readable JSON (pretty-printed)
- Consider encryption for sensitive preferences
- Allow profile sharing within teams (export feature enables this)
- Provide clear warnings before destructive operations
- Profile names must be unique and filesystem-safe
- Document profile format for community contributions
- Consider cloud sync in future (store profiles in cloud storage)
- Make profile directory configurable (~/.file-organizer/profiles/)
