---
name: implement-para-folder-generation
title: Implement PARA folder generation
status: open
size: M
hours: 16
parallel: false
depends_on: ["007"]
created: 2026-01-21T05:39:23Z
updated: 2026-01-24T06:51:14Z
---

# Task 008: Implement PARA folder generation

## Description

Implement automatic PARA folder structure generation, including migration support from flat structures and user-defined category rules. This builds on the design from Task 007 to create functional folder organization.

## Objectives

- Auto-generate standard PARA folder structures
- Implement migration tools for existing flat structures
- Support user-defined category rules
- Handle edge cases and nested structures

## Requirements

### Folder Structure Generation

**Standard PARA Structure:**
```
/
├── Projects/
│   ├── Active/
│   └── Completed/
├── Areas/
│   ├── Personal/
│   └── Professional/
├── Resources/
│   ├── Topics/
│   └── References/
└── Archive/
    ├── {Year}/
    └── {Category}/
```

**Customizable Elements:**
- Subfolder depth and naming
- Additional categories
- Custom naming conventions
- Alternative hierarchies

### Migration Features

1. **Flat to PARA Migration:**
   - Scan existing directory structure
   - Analyze files for categorization
   - Create PARA folders
   - Move files to appropriate categories
   - Generate migration report

2. **Dry-Run Mode:**
   - Preview changes without executing
   - Show file movement plan
   - Estimate time and storage impact
   - Allow user approval before execution

3. **Rollback Support:**
   - Create backup before migration
   - Track all file movements
   - Support undo operations
   - Maintain file integrity

### User-Defined Rules

**Rule Configuration:**
```python
class PARAFolderConfig:
    root_path: str
    structure: Dict[str, Any]
    custom_rules: List[CategoryRule]
    naming_convention: str
    subfolder_template: str
```

**Dynamic Folder Creation:**
- Create folders on-demand based on rules
- Support template-based subfolder naming
- Handle date-based organization (archive)
- Maintain consistent permissions

## Implementation Details

### Core Components

**1. FolderGenerator Class:**
```python
class PARAFolderGenerator:
    def __init__(self, config: PARAFolderConfig):
        self.config = config
        self.rule_engine = RuleEngine(config.custom_rules)

    def generate_structure(self, root_path: str) -> None:
        """Create standard PARA folder structure"""
        pass

    def create_category_folder(self, category: str,
                                subfolder: Optional[str] = None) -> Path:
        """Create specific category folder"""
        pass

    def validate_structure(self) -> bool:
        """Verify folder structure integrity"""
        pass
```

**2. MigrationManager Class:**
```python
class PARAMigrationManager:
    def __init__(self, source_path: str, target_path: str):
        self.source = source_path
        self.target = target_path
        self.categorizer = PARACategorizationEngine()

    def analyze_source(self) -> MigrationPlan:
        """Analyze existing structure and create migration plan"""
        pass

    def execute_migration(self, plan: MigrationPlan,
                          dry_run: bool = True) -> MigrationReport:
        """Execute or preview migration"""
        pass

    def rollback(self, migration_id: str) -> None:
        """Rollback a completed migration"""
        pass

    def generate_report(self) -> MigrationReport:
        """Generate detailed migration report"""
        pass
```

**3. Rule Integration:**
```python
class CategoryFolderMapper:
    def __init__(self, rule_engine: RuleEngine):
        self.rule_engine = rule_engine

    def map_file_to_folder(self, file_path: str) -> str:
        """Map file to appropriate PARA folder based on rules"""
        category = self.rule_engine.categorize(file_path)
        return self.get_folder_path(category)

    def get_folder_path(self, category: PARACategory) -> str:
        """Get full folder path for category"""
        pass
```

### Migration Process

**Step 1: Analysis**
1. Scan source directory
2. Identify all files and folders
3. Apply categorization rules
4. Build migration plan
5. Calculate statistics

**Step 2: Preview (Dry-Run)**
1. Show proposed folder structure
2. Display file movements
3. Highlight conflicts or uncertainties
4. Present summary statistics
5. Request user confirmation

**Step 3: Execution**
1. Create backup snapshot
2. Generate PARA folder structure
3. Move files to categories
4. Update file references (if needed)
5. Generate completion report

**Step 4: Validation**
1. Verify all files moved successfully
2. Check folder structure integrity
3. Validate file accessibility
4. Create audit log

## Acceptance Criteria

- [ ] PARA folder structure generation works correctly
- [ ] Customizable structure based on user configuration
- [ ] Migration from flat structure successfully implemented
- [ ] Dry-run mode shows accurate preview
- [ ] Rollback functionality works reliably
- [ ] User-defined rules applied during folder creation
- [ ] Migration reports generated with detailed statistics
- [ ] Edge cases handled (permissions, duplicates, conflicts)
- [ ] Performance acceptable for large directories (10,000+ files)
- [ ] All unit tests passing (>90% coverage)

## Testing Strategy

### Unit Tests
- Folder generation logic
- Rule application
- Path resolution
- Permission handling

### Integration Tests
- End-to-end migration scenarios
- Dry-run accuracy
- Rollback functionality
- Custom rule integration

### Performance Tests
- Large directory migration (10,000+ files)
- Nested structure handling
- Concurrent operations

### Edge Case Tests
- Empty directories
- Duplicate filenames
- Permission issues
- Symbolic links
- Special characters in names

## Dependencies

- **Task 007**: Design PARA categorization system (must be completed)
- File system access and permissions
- Backup/restore utilities
- Progress tracking UI components

## Technical Notes

**Safety Considerations:**
- Always create backups before migration
- Use atomic operations where possible
- Implement transaction-like rollback
- Log all operations for audit trail

**Performance Optimizations:**
- Batch file operations
- Parallel processing for large migrations
- Incremental progress updates
- Resume capability for interrupted migrations

**Error Handling:**
- Graceful failure with partial completion
- Detailed error logging
- User-friendly error messages
- Recovery suggestions

## Migration Report Format

```markdown
# PARA Migration Report

**Date:** {timestamp}
**Source:** {source_path}
**Target:** {target_path}

## Summary
- Total files: {count}
- Successfully migrated: {success_count}
- Failed: {failure_count}
- Duration: {time}

## Category Distribution
- Projects: {count} files
- Areas: {count} files
- Resources: {count} files
- Archive: {count} files

## Issues
{list of warnings/errors}

## File Movements
{detailed log of moves}
```

## Resources

- Python pathlib documentation
- File system best practices
- PARA folder structure examples
- Migration strategy patterns
