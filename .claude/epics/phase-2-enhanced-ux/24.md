---
name: task-007-tui-file-browser
title: Implement TUI file browser and navigation
epic: phase-2-enhanced-ux
github_issue: null
status: open
size: M
estimated_hours: 16
parallel: true
depends_on: [21]
created: 2026-01-21T05:26:54Z
updated: 2026-01-21T05:35:26Z
labels: [task, tui, ui]
---

# Task 007: Implement TUI file browser and navigation

**Epic:** Phase 2 - Enhanced User Experience
**Status:** Open
**Size:** M (16 hours)
**Parallel Execution:** Yes
**Dependencies:** Task 006

## Objective
Create an interactive file browser with tree view navigation for the Terminal User Interface (TUI), enabling users to browse, filter, and navigate through their file system efficiently.

## Description
Implement the core file browsing functionality using the Textual framework. This includes creating a tree view widget that displays the file system hierarchy, allowing users to expand/collapse directories, navigate with keyboard controls, and filter files based on various criteria.

## Requirements

### Functional Requirements
1. **Tree View Display**
   - Display directory structure as an expandable tree
   - Show file/folder icons and metadata (size, date modified)
   - Support lazy loading for large directories
   - Display file counts per directory

2. **Navigation Controls**
   - Arrow keys for navigation (up/down/left/right)
   - Enter to expand/collapse directories
   - Home/End for jumping to top/bottom
   - Page Up/Down for faster scrolling
   - vim-style navigation (h/j/k/l) as alternative

3. **File Filtering**
   - Filter by file extension (e.g., show only .pdf files)
   - Filter by file size range
   - Filter by date modified/created
   - Filter by filename pattern (glob/regex support)
   - Quick filter toggle (Ctrl+F)
   - Clear filters option

4. **Status Display**
   - Show current path in breadcrumb
   - Display filter status
   - Show total files/folders count
   - Display selected items count

### Technical Requirements
1. Use Textual's DirectoryTree or create custom Tree widget
2. Implement efficient file system scanning
3. Handle permission errors gracefully
4. Support large directories (10,000+ files)
5. Maintain responsive UI (no blocking operations)

### UI Components
```
â”Œâ”€ File Browser â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Path: /Users/username/Documents                â”‚
â”‚ Filters: *.pdf, >1MB [Clear]                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ğŸ“ Projects (125 items)                       â”‚
â”‚   ğŸ“ Work (45 items)                          â”‚
â”‚   ğŸ“„ report.pdf (2.3 MB)                      â”‚
â”‚   ğŸ“„ presentation.pdf (1.8 MB)                â”‚
â”‚ ğŸ“ Downloads (892 items)                      â”‚
â”‚ ğŸ“„ invoice.pdf (156 KB)                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Total: 3 files, 2 folders | Selected: 0       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Implementation Steps

1. **Setup Tree View Component** (4 hours)
   - Create custom DirectoryTree widget extending Textual
   - Implement file system scanning with pathlib
   - Add file/folder icons and metadata display
   - Handle permission errors and hidden files

2. **Implement Navigation** (3 hours)
   - Map keyboard shortcuts to navigation actions
   - Implement scroll and focus management
   - Add breadcrumb path display
   - Support jump-to-path functionality

3. **Add Filtering System** (6 hours)
   - Create filter input widget
   - Implement filter logic (extension, size, date, pattern)
   - Add filter state management
   - Create filter toggle UI
   - Implement filter persistence during navigation

4. **Add Status Bar** (2 hours)
   - Display current path and filter status
   - Show file/folder counts
   - Add loading indicators
   - Display help hints

5. **Testing and Optimization** (1 hour)
   - Test with large directories
   - Verify navigation responsiveness
   - Test filter combinations
   - Handle edge cases

## Acceptance Criteria
- [ ] Tree view displays file system hierarchy correctly
- [ ] All navigation shortcuts work as specified
- [ ] Filtering works for all specified criteria
- [ ] Can handle directories with 10,000+ files without lag
- [ ] Status bar displays accurate information
- [ ] Permission errors display user-friendly messages
- [ ] UI remains responsive during all operations
- [ ] Keyboard shortcuts documented in help

## Test Cases

### Test Case 1: Basic Navigation
```python
def test_tree_navigation():
    # Navigate down the tree
    # Expand directory
    # Navigate back up
    # Assert correct item is focused
```

### Test Case 2: Filtering
```python
def test_file_filtering():
    # Apply extension filter
    # Verify only matching files shown
    # Apply size filter
    # Verify results are correct
    # Clear filters
    # Verify all files shown
```

### Test Case 3: Large Directory
```python
def test_large_directory_performance():
    # Load directory with 10,000+ files
    # Measure load time (<2 seconds)
    # Test navigation responsiveness
    # Verify UI doesn't freeze
```

## Dependencies
- Task 006: Textual TUI framework setup
- Textual 0.50+
- pathlib (standard library)

## Files to Create/Modify
- `file_organizer_v2/src/file_organizer/tui/widgets/file_browser.py` - Main browser widget
- `file_organizer_v2/src/file_organizer/tui/widgets/tree_view.py` - Custom tree component
- `file_organizer_v2/src/file_organizer/tui/filters.py` - Filter logic
- `file_organizer_v2/src/file_organizer/tui/navigation.py` - Navigation handlers
- `file_organizer_v2/tests/tui/test_file_browser.py` - Unit tests

## Reference Materials
- Textual Documentation: https://textual.textualize.io/
- Textual DirectoryTree: https://textual.textualize.io/widgets/directory_tree/
- Python pathlib: https://docs.python.org/3/library/pathlib.html

## Notes
- Consider accessibility features (screen reader support)
- Implement efficient caching for frequently accessed directories
- Allow customization of keyboard shortcuts in config
- Consider adding bookmarks/favorites feature in future iteration
