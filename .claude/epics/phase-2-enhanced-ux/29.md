---
name: Implement copilot mode - rule management and preview
status: open
created: 2026-01-21T05:26:55Z
updated: 2026-01-21T05:35:26Z
github: https://github.com/curdriceaurora/Local-File-Organizer/issues/29
depends_on: [26]
parallel: true
conflicts_with: []
---

# Task: Implement copilot mode - rule management and preview

## Description
Add the ability to save, load, and validate custom organization rules within the copilot mode. Implement a preview system that shows users what changes will be made before actually applying them, allowing for safer file organization operations.

## Acceptance Criteria
- [ ] Users can save custom organization rules to named configurations
- [ ] Rules can be loaded and applied in future sessions
- [ ] Rule validation ensures patterns are safe and valid
- [ ] Preview mode shows all proposed changes before execution
- [ ] Preview displays source path, destination path, and operation type
- [ ] Users can approve/reject changes from preview
- [ ] Rules support pattern matching and conditional logic

## Technical Details
- Implementation approach:
  - Create rule definition schema (YAML/JSON format)
  - Implement rule storage and retrieval system
  - Build preview engine that simulates operations without executing
  - Add validation layer for rule safety checks
  - Create interactive approval interface
- Key considerations:
  - Rule conflicts and priority resolution
  - Validation of file patterns and paths
  - Dry-run mode for safe preview generation
  - Rollback capability if needed
- Code locations/files affected:
  - `file_organizer_v2/src/file_organizer/services/rule_manager.py` (new)
  - `file_organizer_v2/src/file_organizer/services/preview.py` (new)
  - `file_organizer_v2/src/file_organizer/services/copilot.py` (modify)
  - `file_organizer_v2/src/file_organizer/utils/validators.py` (new)

## Dependencies
- [ ] Task 003 - Copilot chat interface must be complete
- [ ] Configuration system for storing rules
- [ ] PyYAML for rule file handling

## Effort Estimate
- Size: M
- Hours: 16
- Parallel: true (can run in parallel with other tasks after Task 003 completes)

## Definition of Done
- [ ] Code implemented for rule management and preview
- [ ] Tests written for rule validation and preview generation
- [ ] Documentation updated with rule syntax and examples
- [ ] Code reviewed
- [ ] Integration tests with various rule patterns
